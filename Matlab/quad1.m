ts=0.0001;
t=-2:ts:2;
m_sig1=tri2(t);
m_sig2=rect(t);
figure(1);subplot(221);plot(t,m_sig1);
subplot(222);plot(t,m_sig2);
Lfft=length(t);
Lfft=2^ceil(log2(Lfft));
freqm=[-Lfft/2:Lfft/2-1]/(Lfft*ts);
M_sig1=fftshift(fft(m_sig1,Lfft));
M_sig2=fftshift(fft(m_sig2,Lfft));
subplot(223);plot(freqm,abs(M_sig1));
subplot(224);plot(freqm,abs(M_sig2));
B_m=150;
h=fir1(40,[B_m*ts]);
mod1=m_sig1.*cos(2*3.14*300*t);
mod2=m_sig2.*sin(2*3.14*300*t);
Mod1=fftshift(fft(mod1,Lfft));
Mod2=fftshift(fft(mod2,Lfft));
%Demodulation
demod1=mod1.*cos(2*3.14*300*t);
demod2=mod2.*sin(2*3.14*300*t);
Demod1=fftshift(fft(demod1,Lfft));
Demod2=fftshift(fft(demod2,Lfft));
%filtering
rec=filter(h,1,demod1);
rec1=filter(h,1,demod2);
figure(2);plot(t,rec);
figure(3);plot(t,rec1);
